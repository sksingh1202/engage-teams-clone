{"version":3,"sources":["components/meeting.jpg","components/logo.jpg","components/CreateRoom.js","components/Peer.js","components/Menubar.js","components/Room.js","App.js","reportWebVitals.js","index.js"],"names":["Alert","props","elevation","variant","useStyles","makeStyles","theme","root","width","marginTop","spacing","CreateRoom","classes","useState","open","setOpen","meetLink","setMeetLink","handleClose","event","reason","getId","n","lastIndexOf","mainLink","substring","meetId","className","src","logo_img","onClick","id","uuid","history","push","autoComplete","type","placeholder","value","onChange","e","target","string","url","URL","_","protocol","isValidHttpUrl","length","alt","meeting_img","Snackbar","autoHideDuration","onClose","severity","createPeer","userToSignal","callerID","stream","socketRef","peer","Peer","initiator","trickle","getTracks","forEach","track","addTrack","err","console","log","on","data","current","emit","addPeer","incomingSignal","error","signal","position","bottom","backgroundColor","clone","obj","copy","constructor","attr","hasOwnProperty","video","userStream","peersRef","screenShare","setScreenShare","screenTrackRef","a","navigator","mediaDevices","getDisplayMedia","cursor","p","replaceTrack","videoTracks","onended","stop","Menubar","audio","setAudio","setVideo","leaveRoom","useRef","BottomNavigation","showLabels","BottomNavigationAction","audioTracks","enabled","isMuted","toggleAudio","label","style","color","icon","isOn","toggleVideo","shareScreen","display","flexWrap","justifyContent","overflow","gridList","height","padding","listStyle","Container","styled","div","StyledVideo","constraints","echoCancellation","min","Video","ref","useEffect","srcObject","playsInline","autoPlay","controls","objectFit","right","minWidth","minHeight","backgroundSize","Room","peers","setPeers","setHeight","userVideo","h","window","screen","addEventListener","new_h","roomID","match","params","io","connect","getUserMedia","getAudioTracks","getVideoTracks","users","peerUserID","peerID","payload","find","peerLeft","destroy","newPeers","filter","videoChat","calcCols","count","muted","GridList","cellHeight","Math","floor","cols","map","GridListTile","rows","disconnect","App","path","exact","component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5067b848.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/meeting.54508598.jpg\";","export default __webpack_public_path__ + \"static/media/logo.6dcdae02.jpg\";","import { useState } from \"react\";\nimport { v1 as uuid } from \"uuid\"; // to generate random roomId(s)\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport MuiAlert from \"@material-ui/lab/Alert\";\nimport KeyboardIcon from \"@material-ui/icons/Keyboard\";\nimport VideocamIcon from \"@material-ui/icons/Videocam\";\nimport CommentIcon from \"@material-ui/icons/Comment\";\nimport AddIcCallIcon from \"@material-ui/icons/AddIcCall\";\nimport meeting_img from \"./meeting.jpg\";\nimport logo_img from \"./logo.jpg\";\n\nconst Alert = (props) => {\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n};\n\nconst isValidHttpUrl = (string) => {\n  let url;\n  try {\n    url = new URL(string);\n  } catch (_) {\n    return false;\n  }\n  return url.protocol === \"http:\" || url.protocol === \"https:\";\n};\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    \"& > * + *\": {\n      marginTop: theme.spacing(2),\n    },\n  },\n}));\n\nconst CreateRoom = (props) => {\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n  const [meetLink, setMeetLink] = useState(\"\");\n\n  const handleClose = (event, reason) => {\n    if (reason === \"clickaway\") return;\n    setOpen(false);\n  };\n\n  const create = () => {\n    const id = uuid();\n    props.history.push(`/room/${id}`); // redirect to a randomly generated room and push to history stack\n  };\n\n  const getId = () => {\n    let n = meetLink.lastIndexOf(\"/\");\n    let mainLink = meetLink.substring(0, n + 1);\n    let meetId = meetLink.substring(n + 1);\n    if (\n      mainLink === \"http://localhost:3000/room/\" ||\n      mainLink === \"https://localhost:3000/room/\" ||\n      mainLink === \"https://engage-teams-clone.herokuapp.com/room/\" ||\n      mainLink === \"http://engage-teams-clone.herokuapp.com/room/\"\n    )\n      return meetId;\n    else return \"\";\n  };\n\n  const joinCall = () => {\n    if (!isValidHttpUrl(meetLink) || getId(meetLink).length === 0) {\n      setOpen(true);\n      setMeetLink(\"\");\n    } else {\n      const id = getId(meetLink);\n      props.history.push(`/room/${id}`); // redirect to the specified room and push to history stack\n    }\n  };\n\n  return (\n    <div>\n      <header className=\"text-gray-700 body-font border-b border-gray-200\">\n        <div className=\"container mx-auto flex flex-wrap p-5 flex-col md:flex-row items-center\">\n          <img src={logo_img} className=\"h-16 w-20\" />\n          <span className=\"ml-3 text-xl\">TEEMS</span>\n        </div>\n      </header>\n      <section className=\"text-gray-700 body-font\">\n        <div className=\"container mx-auto flex px-5 py-24 md:flex-row flex-col items-center\">\n          <div className=\"lg:flex-grow md:w-1/2 lg:pr-24 md:pr-16 flex flex-col md:items-start md:text-left mb-16 md:mb-0 items-center text-center\">\n            <h1 className=\"title-font text-3xl md:text-4xl lg:text-5xl mb-4 font-bold text-gray-900\">\n              Microsof Teems\n            </h1>\n\n            <p className=\"mb-8 leading-relaxed text-xl md:text-2xl lg:text-3xl\">\n              Meet, chat, and call in just one place.\n            </p>\n            <div className=\"flex justify-center\">\n              <button\n                className=\"inline-flex text-white bg-indigo-500 border-0 py-2 px-6 focus:outline-none hover:bg-indigo-600 rounded text-lg\"\n                onClick={create}\n              >\n                <span className=\"mr-3\">\n                  <VideocamIcon />\n                </span>\n                New meeting\n              </button>\n              <button className=\"ml-4 inline-flex text-white bg-indigo-500 border-0 py-2 px-6 focus:outline-none hover:bg-indigo-600 rounded text-lg\">\n                <span className=\"mr-3\">\n                  <CommentIcon />\n                </span>\n                Chat\n              </button>\n            </div>\n            <div className=\"mt-5 relative flex-col xl:flex-row flex w-full flex-wrap items-stretch mb-3 space-y-5 xl:space-y-0 xl:space-x-5\">\n              <div className=\"flex-1\">\n                <span className=\"z-10 h-full leading-snug font-normal absolute text-center text-blueGray-300 absolute bg-transparent rounded text-lg items-center justify-center w-8 pl-3 py-3\">\n                  <KeyboardIcon />\n                </span>\n                <input\n                  autoComplete=\"off\"\n                  id=\"meeting-link\"\n                  type=\"text\"\n                  placeholder=\"Enter the link to join meeting\"\n                  className=\"leading-3 px-3 py-4 placeholder-blueGray-300 text-blueGray-600 relative bg-white bg-white rounded text-base border-0 shadow outline-none focus:outline-none focus:ring w-full pl-10\"\n                  value={meetLink}\n                  onChange={(e) => setMeetLink(e.target.value)}\n                />\n              </div>\n              <button\n                className=\"text-white bg-indigo-500 border-0 py-2 px-6 focus:outline-none hover:bg-indigo-600 rounded text-lg\"\n                onClick={joinCall}\n              >\n                <span className=\"mr-3\">\n                  <AddIcCallIcon />\n                </span>\n                Join meeting\n              </button>\n            </div>\n          </div>\n          <div className=\"lg:max-w-lg lg:w-full md:w-1/2 w-5/6\">\n            <img\n              className=\"object-cover object-center rounded\"\n              alt=\"hero\"\n              src={meeting_img}\n            />\n          </div>\n        </div>\n      </section>\n      <div className={classes.root}>\n        <Snackbar open={open} autoHideDuration={4000} onClose={handleClose}>\n          <Alert onClose={handleClose} severity=\"error\">\n            Invalid meeting link!\n          </Alert>\n        </Snackbar>\n      </div>\n    </div>\n  );\n};\n\nexport default CreateRoom;\n","import Peer from \"simple-peer\";\n\n// called when \"joiner\" creates a peer connection\nexport function createPeer(userToSignal, callerID, stream, socketRef) {\n  const peer = new Peer({\n    initiator: true,\n    trickle: false,\n    // stream,\n  });\n\n  try {\n    stream.getTracks().forEach((track) => peer.addTrack(track, stream));\n  } catch (err) {\n    console.log(`Error in createPeer: ${err}`);\n  }\n\n  // \"signal\" is triggered once the peer object is created\n  peer.on(\"signal\", (data) => {\n    // create an offer to the peer via the backend\n    socketRef.current.emit(\"offer\", { userToSignal, callerID, data });\n  });\n\n  return peer;\n}\n\n// called when person in the call makes a peer connection with the \"joiner\"\nexport function addPeer(incomingSignal, callerID, stream, socketRef) {\n  const peer = new Peer({\n    initiator: false, // person who is already in the call is not the initiator\n    trickle: false,\n    // stream,\n  });\n\n  try {\n    stream.getTracks().forEach((track) => peer.addTrack(track, stream));\n  } catch (error) {\n    console.log(`Error in addPeer: ${error}`);\n  }\n\n  // \"signal\" is triggered once the peer object is created\n  peer.on(\"signal\", (data) => {\n    // accept the offer via the backend\n    socketRef.current.emit(\"answer\", { data, callerID });\n  });\n\n  // establish connection\n  peer.signal(incomingSignal);\n\n  return peer;\n}\n","import React from \"react\";\nimport { useRef } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport BottomNavigation from \"@material-ui/core/BottomNavigation\";\nimport BottomNavigationAction from \"@material-ui/core/BottomNavigationAction\";\nimport MicIcon from \"@material-ui/icons/Mic\";\nimport MicOffIcon from \"@material-ui/icons/MicOff\";\nimport VideocamIcon from \"@material-ui/icons/Videocam\";\nimport VideocamOffIcon from \"@material-ui/icons/VideocamOff\";\nimport CallEndIcon from \"@material-ui/icons/CallEnd\";\nimport ScreenShareIcon from \"@material-ui/icons/ScreenShare\";\nimport StopScreenShareIcon from \"@material-ui/icons/StopScreenShare\";\n\nconst useStyles = makeStyles({\n  root: {\n    position: \"absolute\",\n    bottom: \"2%\",\n    width: \"100%\",\n    backgroundColor: \"#202124\",\n  },\n});\n\nconst Menubar = ({\n  audio,\n  video,\n  screenShare,\n  setAudio,\n  setVideo,\n  setScreenShare,\n  leaveRoom,\n  peersRef,\n  userStream,\n}) => {\n  const screenTrackRef = useRef();\n  const classes = useStyles();\n\n  return (\n    <BottomNavigation showLabels className={classes.root}>\n      <BottomNavigationAction\n        onClick={() => toggleAudio(audio, setAudio)}\n        label={\n          audio.isMuted ? (\n            <span style={{ color: \"white\" }}>Turn on microphone</span>\n          ) : (\n            <span style={{ color: \"white\" }}>Turn off microphone</span>\n          )\n        }\n        icon={\n          audio.isMuted ? (\n            <MicOffIcon color=\"secondary\" />\n          ) : (\n            <MicIcon style={{ color: \"white\" }} />\n          )\n        }\n      />\n      <BottomNavigationAction\n        onClick={() => toggleVideo(video, setVideo)}\n        label={\n          video.isOn ? (\n            <span style={{ color: \"white\" }}>Turn off camera</span>\n          ) : (\n            <span style={{ color: \"white\" }}>Turn on camera</span>\n          )\n        }\n        icon={\n          video.isOn ? (\n            <VideocamIcon style={{ color: \"white\" }} />\n          ) : (\n            <VideocamOffIcon color=\"secondary\" />\n          )\n        }\n      />\n      <BottomNavigationAction\n        onClick={() =>\n          shareScreen(\n            video,\n            userStream,\n            peersRef,\n            screenShare,\n            setScreenShare,\n            screenTrackRef\n          )\n        }\n        label={\n          screenShare ? (\n            <span style={{ color: \"white\" }}>Stop presenting</span>\n          ) : (\n            <span style={{ color: \"white\" }}>Present now</span>\n          )\n        }\n        icon={\n          screenShare ? (\n            <StopScreenShareIcon color=\"secondary\" />\n          ) : (\n            <ScreenShareIcon style={{ color: \"white\" }} />\n          )\n        }\n      />\n      <BottomNavigationAction\n        onClick={() => leaveRoom()}\n        label={<span style={{ color: \"white\" }}>Leave call</span>}\n        icon={<CallEndIcon color=\"secondary\" />}\n      />\n    </BottomNavigation>\n  );\n};\n\nfunction clone(obj) {\n  if (null == obj || \"object\" != typeof obj) return obj;\n  let copy = obj.constructor();\n  for (let attr in obj) {\n    if (obj.hasOwnProperty(attr)) copy[attr] = obj[attr];\n  }\n  return copy;\n}\n\nfunction toggleAudio(audio, setAudio) {\n  if (audio && audio.audioTracks) {\n    audio.audioTracks.forEach((track) => (track.enabled = !track.enabled));\n    audio.isMuted = !audio.isMuted;\n    const newAudio = clone(audio);\n    setAudio(newAudio);\n  }\n}\n\nfunction toggleVideo(video, setVideo) {\n  if (video && video.videoTracks) {\n    video.videoTracks.forEach((track) => (track.enabled = !track.enabled));\n    video.isOn = !video.isOn;\n    const newVideo = clone(video);\n    setVideo(newVideo);\n  }\n}\n\nasync function shareScreen(\n  video,\n  userStream,\n  peersRef,\n  screenShare,\n  setScreenShare,\n  screenTrackRef\n) {\n  try {\n    console.log(screenTrackRef.current);\n    if (!screenShare) {\n      const stream = await navigator.mediaDevices.getDisplayMedia({\n        cursor: true,\n      });\n      screenTrackRef.current = stream.getTracks()[0];\n      peersRef.current.forEach((p) => {\n        p.peer.replaceTrack(\n          video.videoTracks[0],\n          screenTrackRef.current,\n          userStream.current\n        );\n      });\n      setScreenShare(true);\n      screenTrackRef.current.onended = () => {\n        peersRef.current.forEach((p) => {\n          p.peer.replaceTrack(\n            screenTrackRef.current,\n            video.videoTracks[0],\n            userStream.current\n          );\n        });\n      };\n    } else if (screenTrackRef.current) {\n      console.log(\"RAN\");\n      screenTrackRef.current.stop();\n      setScreenShare(false);\n    }\n  } catch (e) {\n    console.log(e);\n  }\n}\n\nexport default Menubar;\n","// built in react\nimport { useEffect, useRef, useState } from \"react\";\n\n// external packages\nimport io from \"socket.io-client\";\nimport styled from \"styled-components\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport GridList from \"@material-ui/core/GridList\";\nimport GridListTile from \"@material-ui/core/GridListTile\";\n\n// internal components\nimport { createPeer, addPeer } from \"./Peer\";\nimport Menubar from \"./Menubar\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    justifyContent: \"space-around\",\n    overflow: \"hidden\",\n    backgroundColor: \"#202124\",\n  },\n  gridList: {\n    width: \"100%\",\n    height: \"100%\",\n    display: \"flex\",\n    padding: 0,\n    flexWrap: \"wrap\",\n    listStyle: \"none\",\n    overflow: \"auto\",\n    justifyContent: \"center\",\n  },\n}));\n\nconst Container = styled.div`\n  position: absolute;\n  top: 10px;\n  bottom: 10px;\n  height: 100%;\n  width: 100%;\n  margin: auto;\n  background-color: #202124;\n`;\n\nconst StyledVideo = styled.video`\n  position: absolute;\n  right: 1%;\n  bottom: 5%;\n  height: 16%;\n  width: 20%;\n  z-index: 1;\n`;\n\nconst constraints = {\n  audio: { echoCancellation: true },\n  video: {\n    width: { min: 1280 },\n    height: { min: 720 },\n  },\n};\n\nconst Video = (props) => {\n  const ref = useRef();\n  useEffect(() => {\n    props.peer.on(\"stream\", (stream) => {\n      ref.current.srcObject = stream;\n    });\n  }, []);\n  return (\n    <video\n      height=\"100%\"\n      width=\"100%\"\n      playsInline\n      autoPlay\n      controls\n      ref={ref}\n      style={{ \n        padding: 0,\n        objectFit: \"cover\",\n        position: \"absolute\",\n        right: 0,\n        bottom: 0,\n        minWidth: \"100%\",\n        minHeight: \"100%\",\n        width: \"auto\",\n        height: \"auto\",\n        backgroundSize: \"cover\",\n        overflow: \"hidden\",\n        }}\n    />\n  );\n};\n\nconst Room = (props) => {\n  const [peers, setPeers] = useState([]);\n  const [audio, setAudio] = useState({});\n  const [video, setVideo] = useState({});\n  const [height, setHeight] = useState();\n  const [screenShare, setScreenShare] = useState(false);\n  const socketRef = useRef();\n  const userVideo = useRef();\n  const peersRef = useRef([]);\n  const userStream = useRef();\n\n  useEffect(() => {\n    let h = window.screen.height;\n    setHeight(h);\n    window.addEventListener(\"resize\", () => {\n      let new_h = window.screen.height;\n      console.log(new_h);\n      setHeight(new_h);\n    });\n\n    const roomID = props.match.params.roomID;\n    const videoChat = async () => {\n      socketRef.current = io.connect(\"/\");\n      const stream = await navigator.mediaDevices.getUserMedia(constraints);\n      userStream.current = stream;\n      userVideo.current.srcObject = stream;\n      setAudio({ isMuted: false, audioTracks: stream.getAudioTracks() });\n      setVideo({ isOn: true, videoTracks: stream.getVideoTracks() });\n      socketRef.current.emit(\"join-room\", roomID);\n\n      socketRef.current.on(\"room-full\", () =>\n        console.log(\"Sorry the room is full!\")\n      );\n\n      socketRef.current.on(\"all-users\", (users) => {\n        const peers = [];\n        users.forEach((peerUserID) => {\n          const peer = createPeer(\n            peerUserID,\n            socketRef.current.id,\n            stream,\n            socketRef\n          );\n\n          peersRef.current.push({\n            peerID: peerUserID,\n            peer,\n          });\n          peers.push({\n            peerID: peerUserID,\n            peer,\n          });\n        });\n        setPeers([...peersRef.current]);\n      });\n\n      socketRef.current.on(\"user-joined\", (payload) => {\n        const peer = addPeer(payload.data, payload.callerID, stream, socketRef);\n\n        peersRef.current.push({\n          peerID: payload.callerID,\n          peer,\n        });\n        setPeers([...peersRef.current]);\n      });\n\n      socketRef.current.on(\"receiving-answer\", (payload) => {\n        const item = peersRef.current.find((p) => p.peerID === payload.id);\n        item.peer.signal(payload.data);\n      });\n\n      socketRef.current.on(\"user-left\", (id) => {\n        const peerLeft = peersRef.current.find((p) => p.peerID === id);\n        if (peerLeft) {\n          peerLeft.peer.destroy();\n        }\n        const newPeers = peersRef.current.filter((p) => p.peerID !== id);\n        peersRef.current = newPeers;\n        setPeers(newPeers);\n      });\n    };\n    videoChat();\n  }, []);\n\n  const leaveRoom = () => {\n    userVideo.current.srcObject.getTracks().forEach((track) => track.stop());\n    peersRef.current = null;\n    setPeers(peersRef.current);\n    socketRef.current.disconnect();\n    props.history.push(`/`);\n  };\n\n  const calcRows = (count) => {\n    console.log(\"Rows: \" + count);\n    if (count <= 2) return 30;\n    if (count <= 6) return 15;\n    if (count <= 9) return 10;\n    if (count <= 16) return 7;\n  };\n\n  const calcCols = (count) => {\n    console.log(\"Cols: \" + count);\n    if (count === 1) return 60;\n    if (count <= 4) return 30;\n    if (count <= 9) return 20;\n    if (count <= 16) return 15;\n  };\n\n  const classes = useStyles();\n\n  return (\n    <Container>\n      <StyledVideo controls muted ref={userVideo} autoPlay playsInline />\n      <div className={classes.root}>\n        <GridList\n          cellHeight={Math.floor(height / 35)}\n          cols={60}\n          className={classes.gridList}\n        >\n          {peers.map((peer) => (\n            <GridListTile\n              rows={calcRows(peers.length)}\n              cols={calcCols(peers.length)}\n              key={peer.peerID}\n            >\n              <Video peer={peer.peer} />\n            </GridListTile>\n          ))}\n        </GridList>\n      </div>\n      <Menubar\n        audio={audio}\n        video={video}\n        screenShare={screenShare}\n        setAudio={setAudio}\n        setVideo={setVideo}\n        setScreenShare={setScreenShare}\n        leaveRoom={leaveRoom}\n        peersRef={peersRef}\n        userStream={userStream}\n      />\n    </Container>\n  );\n};\n\nexport default Room;\n","import React from \"react\";\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport CreateRoom from \"./components/CreateRoom\";\nimport Room from \"./components/Room\";\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <Switch>\n        <Route path=\"/\" exact component={CreateRoom} />\n        <Route path=\"/room/:roomID\" component={Room} />\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nimport '@fontsource/roboto';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}