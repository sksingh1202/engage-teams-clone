(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{113:function(n,e){},115:function(n,e){},132:function(n,e,t){"use strict";t.r(e);var r,c,a=t(0),i=t.n(a),o=t(66),u=t.n(o),s=(t(79),t(72)),f=t(1),l=t(134),j=t(3),p=function(n){return Object(j.jsx)("button",{onClick:function(){var e=Object(l.a)();n.history.push("/room/".concat(e))},children:"Create room"})},h=t(34),d=t.n(h),b=t(73),m=t(67),O=t(74),v=t(35),g=t(68),x=t.n(g),w=t(37),I=t(36),D=t.n(I);function y(n,e,t,r){var c=new D.a({initiator:!0,trickle:!1,stream:t});return c.on("signal",(function(t){r.current.emit("offer",{userToSignal:n,callerID:e,data:t})})),c}function k(n,e,t,r){var c=new D.a({initiator:!1,trickle:!1,stream:t});return c.on("signal",(function(n){r.current.emit("answer",{data:n,callerID:e})})),c.signal(n),c}var C=w.a.div(r||(r=Object(v.a)(["\n  padding: 20px;\n  display: flex;\n  height: 100vh;\n  width: 90%;\n  margin: auto;\n  flex-wrap: wrap;\n"]))),S=w.a.video(c||(c=Object(v.a)(["\n  height: 40%;\n  width: 50%;\n"]))),E=function(n){var e=Object(a.useRef)();return Object(a.useEffect)((function(){n.peer.on("stream",(function(n){e.current.srcObject=n}))}),[]),Object(j.jsx)(S,{playsInline:!0,autoPlay:!0,ref:e})},F={audio:{echoCancellation:!0},video:{width:{min:1280},height:{min:720}}},P=function(n){var e=Object(a.useState)([]),t=Object(O.a)(e,2),r=t[0],c=t[1],i=Object(a.useRef)(),o=Object(a.useRef)(),u=Object(a.useRef)([]),s=n.match.params.roomID;function f(){return(f=Object(m.a)(d.a.mark((function n(){var e;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i.current=x.a.connect("/"),n.next=3,navigator.mediaDevices.getUserMedia(F);case 3:e=n.sent,o.current.srcObject=e,i.current.emit("join-room",s),i.current.on("room-full",(function(){return console.log("Sorry the room is full!")})),i.current.on("all-users",(function(n){var t=[];n.forEach((function(n){var r=y(n,i.current.id,e,i);u.current.push({peerID:n,peer:r}),t.push(r)})),c(t)})),i.current.on("user-joined",(function(n){var t=k(n.data,n.callerID,e,i);u.current.push({peerID:n.callerID,peer:t}),c((function(n){return[].concat(Object(b.a)(n),[t])}))})),i.current.on("receiving-answer",(function(n){u.current.find((function(e){return e.peerID===n.id})).peer.signal(n.data)}));case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){f.apply(this,arguments)}()}),[]),Object(j.jsxs)(C,{children:[Object(j.jsx)(S,{muted:!0,ref:o,autoPlay:!0,playsInline:!0}),r.map((function(n,e){return Object(j.jsx)(E,{peer:n},e)}))]})};var R=function(){return Object(j.jsx)(s.a,{children:Object(j.jsxs)(f.c,{children:[Object(j.jsx)(f.a,{path:"/",exact:!0,component:p}),Object(j.jsx)(f.a,{path:"/room/:roomID",component:P})]})})},T=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,135)).then((function(e){var t=e.getCLS,r=e.getFID,c=e.getFCP,a=e.getLCP,i=e.getTTFB;t(n),r(n),c(n),a(n),i(n)}))};u.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(R,{})}),document.getElementById("root")),T()},79:function(n,e,t){}},[[132,1,2]]]);
//# sourceMappingURL=main.64a36903.chunk.js.map