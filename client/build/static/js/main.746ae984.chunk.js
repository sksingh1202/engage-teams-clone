(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{258:function(e,t,n){},311:function(e,t){},313:function(e,t){},323:function(e,t,n){},475:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(16),a=n.n(c),o=(n(258),n(235)),s=n(19),i=n(5),l=n.n(i),u=n(11),d=n(8),j=n(38),b=n(523),h=n(508),p=n(66),f=n(524),m=n(521),x=n(219),O=n.n(x),g=n(108),v=n.n(g),w=n(218),y=n.n(w),k=n(220),C=n.n(k),N=n(10),S=n.n(N);function _(e){return D.apply(this,arguments)}function D(){return(D=Object(u.a)(l.a.mark((function e(t){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={email:t.email,first_name:t.given_name||t.name,last_name:t.family_name,username:t.email},r={method:"post",url:"/create_user",data:n},e.next=5,S()(r);case 5:return c=e.sent,e.abrupt("return",c.data.id);case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function T(e,t){return I.apply(this,arguments)}function I(){return(I=Object(u.a)(l.a.mark((function e(t,n){var r,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={userData:{email:t.email,first_name:t.given_name||t.name,last_name:t.family_name,username:t.email},roomID:n},c={method:"post",url:"/add_user",data:r},e.next=5,S()(c);case 5:return a=e.sent,e.abrupt("return",a.data.id);case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function E(e,t){return M.apply(this,arguments)}function M(){return(M=Object(u.a)(l.a.mark((function e(t,n){var r,c,a,o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new Date,c="".concat(t.given_name||t.name||t.email,"'s Meeting Chat: ").concat(r.getDate(),"/").concat(r.getMonth()+1,"/").concat(r.getFullYear()," @ ").concat(r.getHours(),":").concat(r.getMinutes(),":").concat(r.getSeconds()),a={userData:{title:c,admin_username:t.email},roomID:n},o={method:"post",url:"/create_chat",data:a},e.next=7,S()(o);case 7:return s=e.sent,e.abrupt("return",s.data.id);case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function L(e,t){return R.apply(this,arguments)}function R(){return(R=Object(u.a)(l.a.mark((function e(t,n){var r,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={username:t.email,roomID:n},c={method:"post",url:"/get_chat_msgs",data:r},e.next=5,S()(c);case 5:return a=e.sent,e.abrupt("return",a.data);case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function z(e,t,n){return H.apply(this,arguments)}function H(){return(H=Object(u.a)(l.a.mark((function e(t,n,r){var c,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c={username:t.email,data:{text:n},roomID:r},a={method:"post",url:"/post_chat_msg",data:c},e.next=5,S()(a);case 5:return o=e.sent,e.abrupt("return",o);case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var A=n.p+"static/media/meeting.54508598.jpg",F=n.p+"static/media/logo.6dcdae02.jpg",W=n(515),P=n(522),U=n(514),G=n(512),B=n(513),J=n(511),V=n(509),Y=n(107),q=n(2),K=function(e){return Object(q.jsx)(m.a,Object(j.a)({elevation:6,variant:"filled"},e))},X=Object(h.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}})),Z=function(e){var t=X(),n=Object(r.useState)(!1),c=Object(d.a)(n,2),a=c[0],o=c[1],s=Object(r.useState)(!1),i=Object(d.a)(s,2),j=i[0],h=i[1],m=Object(r.useState)(""),x=Object(d.a)(m,2),g=x[0],w=x[1],k=Object(r.useState)([""]),N=Object(d.a)(k,2),S=N[0],D=N[1],T=Object(p.b)(),I=T.isAuthenticated,M=T.loginWithRedirect,L=T.logout,R=T.user,z=T.isLoading,H=Object(Y.a)(),Z=Object(V.a)(H.breakpoints.down("sm")),Q=function(){var t=Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(I||M(),!I){t.next=7;break}return n=Object(b.a)(),t.next=5,E(R,n);case 5:t.sent?e.history.push("/room/".concat(n)):(h(!0),console.log("Error"));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),$=function(){var e=g.lastIndexOf("/"),t=g.substring(0,e+1),n=g.substring(e+1);return"http://localhost:3000/room/"===t||"https://localhost:3000/room/"===t||"https://engage-teams-clone.herokuapp.com/room/"===t||"http://engage-teams-clone.herokuapp.com/room/"===t?n:""};return Object(r.useEffect)((function(){!z&&I&&function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(R);case 2:e.sent||(h(!0),setTimeout(L,2500));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[I,z,L,R]),Object(q.jsxs)("div",{children:[Object(q.jsx)("header",{className:"text-gray-700 body-font border-b border-gray-200",children:Object(q.jsxs)("div",{className:"container mx-auto flex flex-wrap p-5 flex-col md:flex-row items-center",children:[Object(q.jsx)("img",{src:F,className:"h-16 w-20",alt:""}),Object(q.jsx)("span",{className:"ml-3 text-xl",children:"TEEMS"}),Object(q.jsx)("nav",{className:"md:ml-auto flex flex-wrap items-center text-base justify-center",children:!z&&I?Object(q.jsxs)("div",{children:[Object(q.jsxs)("span",{className:"mr-6 text-lg text-indigo-700",children:["Welcome back ",R.first_name||R.name||R.email]}),Object(q.jsx)("button",{className:"mt-5 md:mt-0 md:mr-5 inline-flex text-white bg-indigo-500 border-0 py-3 px-10 focus:outline-none hover:bg-indigo-600 rounded text-lg",onClick:Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=R.first_name||R.name||R.email,D(["Goodbye, ".concat(t,". Looking forward to seeing you at Teems.")]),setTimeout((function(){L({returnTo:window.location.origin})}),5e3);case 3:case"end":return e.stop()}}),e)}))),children:Object(q.jsx)("span",{className:"cursor-pointer",children:"Logout"})})]}):Object(q.jsx)("button",{className:"mt-5 md:mt-0 md:mr-5 inline-flex text-white bg-indigo-500 border-0 py-3 px-10 focus:outline-none hover:bg-indigo-600 rounded text-lg",onClick:function(){return M()},children:Object(q.jsx)("span",{className:"cursor-pointer",children:"Login"})})})]})}),Object(q.jsx)("section",{className:"text-gray-700 body-font",children:Object(q.jsxs)("div",{className:"container mx-auto flex px-5 py-24 md:flex-row flex-col items-center",children:[Object(q.jsxs)("div",{className:"lg:flex-grow md:w-1/2 lg:pr-24 md:pr-16 flex flex-col md:items-start md:text-left mb-16 md:mb-0 items-center text-center",children:[Object(q.jsx)("h1",{className:"title-font text-3xl md:text-4xl lg:text-5xl mb-4 font-bold text-gray-900",children:"Microsof Teems"}),Object(q.jsx)("p",{className:"mb-8 leading-relaxed text-xl md:text-2xl lg:text-3xl",children:"Meet, chat, and call in just one place."}),Object(q.jsxs)("div",{className:"flex justify-center",children:[Object(q.jsxs)("button",{className:"inline-flex text-white bg-indigo-500 border-0 py-2 px-6 focus:outline-none hover:bg-indigo-600 rounded text-lg",onClick:Q,children:[Object(q.jsx)("span",{className:"mr-3",children:Object(q.jsx)(v.a,{})}),"New meeting"]}),Object(q.jsxs)("button",{className:"ml-4 inline-flex text-white bg-indigo-500 border-0 py-2 px-6 focus:outline-none hover:bg-indigo-600 rounded text-lg",onClick:function(){I||M(),I&&e.history.push({pathname:"/chat",state:{username:R.email}})},children:[Object(q.jsx)("span",{className:"mr-3",children:Object(q.jsx)(y.a,{})}),"Chat"]})]}),Object(q.jsxs)("div",{className:"mt-5 relative flex-col xl:flex-row flex w-full flex-wrap items-stretch mb-3 space-y-5 xl:space-y-0 xl:space-x-5",children:[Object(q.jsxs)("div",{className:"flex-1",children:[Object(q.jsx)("span",{className:"z-10 h-full leading-snug font-normal absolute text-center text-blueGray-300 absolute bg-transparent rounded text-lg items-center justify-center w-8 pl-3 py-3",children:Object(q.jsx)(O.a,{})}),Object(q.jsx)("input",{autoComplete:"off",id:"meeting-link",type:"text",placeholder:"Enter the link to join meeting",className:"leading-3 px-3 py-4 placeholder-blueGray-300 text-blueGray-600 relative bg-white bg-white rounded text-base border-0 shadow outline-none focus:outline-none focus:ring w-full pl-10",value:g,onChange:function(e){return w(e.target.value)}})]}),Object(q.jsxs)("button",{className:"text-white bg-indigo-500 border-0 py-2 px-6 focus:outline-none hover:bg-indigo-600 rounded text-lg",onClick:function(){if(function(e){var t;try{t=new URL(e)}catch(n){return!1}return"http:"===t.protocol||"https:"===t.protocol}(g)&&0!==$().length){if(I||M(),I){var t=$();e.history.push("/room/".concat(t))}}else o(!0),w("")},children:[Object(q.jsx)("span",{className:"mr-3",children:Object(q.jsx)(C.a,{})}),"Join meeting"]})]})]}),Object(q.jsx)("div",{className:"lg:max-w-lg lg:w-full md:w-1/2 w-5/6",children:Object(q.jsx)("img",{className:"object-cover object-center rounded",alt:"hero",src:A})})]})}),Object(q.jsx)("div",{className:t.root,children:Object(q.jsx)(f.a,{open:a,autoHideDuration:4e3,onClose:function(){return o(!1)},children:Object(q.jsx)(K,{onClose:function(){return o(!1)},severity:"error",children:"Invalid meeting link!"})})}),Object(q.jsx)("div",{className:t.root,children:Object(q.jsx)(f.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:0!==S[0].length,autoHideDuration:6e3,onClose:function(){return D([""])},children:Object(q.jsx)(K,{onClose:function(){return D([""])},color:"info",children:S[0]})})}),Object(q.jsx)("div",{children:Object(q.jsxs)(P.a,{fullScreen:Z,open:j,onClose:function(){return h(!1)},"aria-labelledby":"responsive-dialog-title",children:[Object(q.jsx)(J.a,{id:"responsive-dialog-title",children:"Problem connecting"}),Object(q.jsx)(G.a,{children:Object(q.jsx)(B.a,{children:"It seems that something is temporarily wrong with your network connection. Please check your internet connection and try again."})}),Object(q.jsx)(U.a,{children:Object(q.jsx)(W.a,{autoFocus:!0,onClick:function(){return h(!1)},color:"primary",children:"OK"})})]})})]})},Q=n(13),$=n(132),ee=n(221),te=n.n(ee),ne=n(134),re=n(518),ce=n(519),ae=n(233),oe=n.n(ae),se=n(133),ie=n.n(se);function le(e,t,n,r){var c=new ie.a({initiator:!0,trickle:!1});try{n.getTracks().forEach((function(e){return c.addTrack(e,n)}))}catch(a){console.log("Error in createPeer: ".concat(a))}return c.on("signal",(function(n){r.current.emit("offer",{userToSignal:e,callerID:t,data:n})})),c}function ue(e,t,n,r){var c=new ie.a({initiator:!1,trickle:!1});try{n.getTracks().forEach((function(e){return c.addTrack(e,n)}))}catch(a){console.log("Error in addPeer: ".concat(a))}return c.on("signal",(function(e){r.current.emit("answer",{data:e,callerID:t})})),c.signal(e),c}var de=n(516),je=n(517),be=n(223),he=n.n(be),pe=n(222),fe=n.n(pe),me=n(224),xe=n.n(me),Oe=n(229),ge=n.n(Oe),ve=n(226),we=n.n(ve),ye=n(225),ke=n.n(ye),Ce=n(227),Ne=n.n(Ce),Se=n(228),_e=n.n(Se),De=Object(h.a)({root:{position:"absolute",bottom:0,width:"100%",backgroundColor:"#202124"}});function Te(e){if(null==e||"object"!=typeof e)return e;var t=e.constructor();for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Ie(){return(Ie=Object(u.a)(l.a.mark((function e(t,n,r,c,a,o){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,console.log(o.current),c){e.next=12;break}return e.next=5,navigator.mediaDevices.getDisplayMedia({cursor:!0});case 5:s=e.sent,o.current=s.getTracks()[0],r.current.forEach((function(e){e.peer.replaceTrack(t.videoTracks[0],o.current,n.current)})),a(!0),o.current.onended=function(){r.current.forEach((function(e){e.peer.replaceTrack(o.current,t.videoTracks[0],n.current)}))},e.next=13;break;case 12:o.current&&(console.log("RAN"),o.current.stop(),a(!1));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}var Ee,Me,Le=function(e){var t=e.audio,n=e.video,c=e.screenShare,a=e.showChat,o=e.setAudio,s=e.setVideo,i=e.setScreenShare,l=e.setShowChat,u=e.leaveRoom,d=e.peersRef,j=e.userStream,b=Object(r.useRef)(),h=De();return Object(q.jsxs)(de.a,{showLabels:!0,className:h.root,children:[Object(q.jsx)(je.a,{onClick:function(){return function(e,t){if(e&&e.audioTracks){e.audioTracks.forEach((function(e){return e.enabled=!e.enabled})),e.isMuted=!e.isMuted,t(Te(e))}}(t,o)},label:t.isMuted?Object(q.jsx)("span",{style:{color:"white"},children:"Turn on microphone"}):Object(q.jsx)("span",{style:{color:"white"},children:"Turn off microphone"}),icon:t.isMuted?Object(q.jsx)(fe.a,{color:"secondary"}):Object(q.jsx)(he.a,{style:{color:"white"}})}),Object(q.jsx)(je.a,{onClick:function(){return function(e,t){if(e&&e.videoTracks){e.videoTracks.forEach((function(e){return e.enabled=!e.enabled})),e.isOn=!e.isOn,t(Te(e))}}(n,s)},label:n.isOn?Object(q.jsx)("span",{style:{color:"white"},children:"Turn off camera"}):Object(q.jsx)("span",{style:{color:"white"},children:"Turn on camera"}),icon:n.isOn?Object(q.jsx)(v.a,{style:{color:"white"}}):Object(q.jsx)(xe.a,{color:"secondary"})}),Object(q.jsx)(je.a,{onClick:function(){return function(e,t,n,r,c,a){return Ie.apply(this,arguments)}(n,j,d,c,i,b)},label:c?Object(q.jsx)("span",{style:{color:"white"},children:"Stop presenting"}):Object(q.jsx)("span",{style:{color:"white"},children:"Present now"}),icon:c?Object(q.jsx)(ke.a,{color:"secondary"}):Object(q.jsx)(we.a,{style:{color:"white"}})}),Object(q.jsx)(je.a,{onClick:function(){return l(!a)},label:a?Object(q.jsx)("span",{style:{color:"white"},children:"Hide Chat"}):Object(q.jsx)("span",{style:{color:"white"},children:"Show Chat"}),icon:a?Object(q.jsx)(Ne.a,{style:{color:"yellow"}}):Object(q.jsx)(_e.a,{style:{color:"white"}})}),Object(q.jsx)(je.a,{onClick:function(){return u()},label:Object(q.jsx)("span",{style:{color:"white"},children:"Leave call"}),icon:Object(q.jsx)(ge.a,{color:"secondary"})})]})},Re=(n(323),n(324)(window)),ze=Object(h.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:"#202124"},gridList:{width:"100%",height:"100%",display:"flex",padding:0,flexWrap:"wrap",listStyle:"none",overflow:"auto",justifyContent:"center"},snackRoot:{width:"100%","& > * + *":{marginTop:e.spacing(2)}},button:{margin:e.spacing(1),marginLeft:e.spacing(4)}}}));function He(e){return Object(q.jsx)(m.a,Object(j.a)({elevation:6,variant:"filled"},e))}var Ae=ne.a.div(Ee||(Ee=Object($.a)(["\n  position: absolute;\n  top: 10px;\n  bottom: 10px;\n  height: 100%;\n  width: 100%;\n  margin: auto;\n  background-color: #202124;\n"]))),Fe=ne.a.video(Me||(Me=Object($.a)(["\n  position: absolute;\n  right: 1%;\n  bottom: 5%;\n  height: 16%;\n  width: 20%;\n  z-index: 1;\n"]))),We={audio:{echoCancellation:!0},video:{width:{min:1280},height:{min:720}}},Pe=function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){e.peer.on("stream",(function(e){t.current.srcObject=e}))}),[e.peer]),Object(q.jsx)("video",{height:"100%",width:"100%",playsInline:!0,autoPlay:!0,controls:!0,ref:t,style:{padding:0,objectFit:"cover",position:"absolute",right:0,bottom:0,minWidth:"100%",minHeight:"100%",width:"auto",height:"auto",backgroundSize:"cover",overflow:"hidden"}})},Ue=function(e){var t=Object(r.useState)([]),n=Object(d.a)(t,2),c=n[0],a=n[1],o=Object(r.useState)({}),s=Object(d.a)(o,2),i=s[0],j=s[1],b=Object(r.useState)({}),h=Object(d.a)(b,2),m=h[0],x=h[1],O=Object(r.useState)(),g=Object(d.a)(O,2),v=g[0],w=g[1],y=Object(r.useState)([]),k=Object(d.a)(y,2),C=k[0],N=k[1],S=Object(r.useState)(""),_=Object(d.a)(S,2),D=_[0],I=_[1],E=Object(r.useState)(!1),M=Object(d.a)(E,2),R=M[0],H=M[1],A=Object(r.useState)(!1),F=Object(d.a)(A,2),K=F[0],X=F[1],Z=Object(r.useState)(!1),$=Object(d.a)(Z,2),ee=$[0],ne=$[1],ae=Object(r.useState)([""]),se=Object(d.a)(ae,2),ie=se[0],de=se[1],je=Object(r.useState)(""),be=Object(d.a)(je,2),he=be[0],pe=be[1],fe=Object(r.useRef)(),me=Object(r.useRef)(),xe=Object(r.useRef)([]),Oe=Object(r.useRef)(),ge=Object(r.useRef)(),ve=Object(r.useRef)(),we=Object(p.b)(),ye=we.user,ke=we.isAuthenticated,Ce=we.loginWithRedirect,Ne=Object(Y.a)(),Se=Object(V.a)(Ne.breakpoints.down("sm")),_e=e.match.params.roomID;Object(r.useEffect)((function(){var e=window.screen.height;w(e),window.addEventListener("resize",(function(){var e=window.screen.height;w(e)})),fe.current=te.a.connect("/");var t=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia(We);case 2:t=e.sent,Oe.current=t,me.current.srcObject=t,j({isMuted:!1,audioTracks:t.getAudioTracks()}),x({isOn:!0,videoTracks:t.getVideoTracks()}),fe.current.emit("join-room",{roomID:_e,email:ye.email}),fe.current.on("all-users",(function(e){var n=[];e.forEach((function(e){var r=le(e,fe.current.id,t,fe);xe.current.push({peerID:e,peer:r}),n.push({peerID:e,peer:r})})),a(Object(Q.a)(xe.current))})),fe.current.on("user-joined",(function(e){var n=ue(e.data,e.callerID,t,fe);xe.current.push({peerID:e.callerID,peer:n}),a(Object(Q.a)(xe.current))})),fe.current.on("receiving-answer",(function(e){xe.current.find((function(t){return t.peerID===e.id})).peer.signal(e.data),T(ye,_e)})),fe.current.on("user-left",(function(e){var t=xe.current.find((function(t){return t.peerID===e}));t&&t.peer.destroy();var n=xe.current.filter((function(t){return t.peerID!==e}));xe.current=n,a(n)})),fe.current.on("reload_msgs",(function(e){Te()}));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();ke?function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fe.current.emit("permission",{userName:ye.name||ye.email,roomID:_e,email:ye.email}),fe.current.on("no permit required",Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:return e.next=5,Te();case 5:de(["Welcome to the meet, ".concat(ye.first_name||ye.name||ye.email)]),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))),fe.current.on("permit?",(function(e){var t=e.userAlias,n=e.id;ve.current=n,pe("1 ".concat(t))})),fe.current.on("denied",(function(){pe("denied to join")})),fe.current.on("allowed",function(){var e=Object(u.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:return e.next=5,Te();case 5:de(["Welcome to the meet, ".concat(ye.first_name||ye.name||ye.email)]),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()():Ce()}),[ke,Ce,_e,ye]);var De=function(e){return 1===e?60:e<=4?30:e<=9?20:e<=16?15:void 0},Te=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(ye,_e);case 2:(t=e.sent)&&"function"===typeof t[Symbol.iterator]&&N(Object(Q.a)(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ie=function(e){var t="";return e.first_name&&(t+=e.first_name.substr(0,1).toUpperCase()),e.last_name&&(t+=e.last_name.substr(0,1).toUpperCase()),t},Ee=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==D.length){e.next=4;break}ne(!0),e.next=9;break;case 4:return e.next=6,z(ye,D,_e);case 6:fe.current.emit("reload"),I(""),Te();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=ze();return Object(q.jsxs)(Ae,{children:[Object(q.jsx)(Fe,{controls:!0,muted:!0,ref:me,autoPlay:!0,playsInline:!0}),Object(q.jsx)("div",{className:Me.root,children:Object(q.jsx)(re.a,{cellHeight:Math.floor(v/35),cols:60,className:Me.gridList,children:c.map((function(e){return Object(q.jsx)(ce.a,{rows:(t=c.length,t<=2?30:t<=6?15:t<=9?10:t<=16?7:void 0),cols:De(c.length),children:Object(q.jsx)(Pe,{peer:e.peer})},e.peerID);var t}))})}),Object(q.jsx)("div",{style:{position:"absolute",height:"100%",width:"100%",top:"7%"},children:Object(q.jsx)("div",{className:"flex justify-between",style:{minHeight:"85%"},children:Object(q.jsx)("section",{className:"flex",children:Object(q.jsxs)("div",{id:"chat-div",className:(R?"":"hidden")+" bg-gray-100 text-gray-700 sm:max-w-sm p-4 border-t border-b-4 border-gray-300 flex flex-col justify-between",children:[Object(q.jsxs)("div",{children:[Object(q.jsx)("div",{className:"flex justify-between items-center",children:Object(q.jsx)("h1",{className:"font-semibold",children:"Meeting chat"})}),Object(q.jsxs)("div",{className:"py-3 flex justify-center items-center space-x-4 text-sm",children:[Object(q.jsx)("svg",{className:"w-6 h-6 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Object(q.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),Object(q.jsx)("h2",{className:"font-semibold",children:"Meeting started"})]}),Object(q.jsx)("div",{style:{maxHeight:"23.2rem"},className:"text-sm mt-4 space-y-4 overflow-scroll scrollbar-hidden",children:C.map((function(e){return Object(q.jsxs)("div",{className:"flex",children:[Object(q.jsx)("span",{className:"bg-indigo-900 text-gray-300 h-8 w-10 p-2 rounded-full flex items-center justify-center mt-2 z-10",children:Ie(e.sender)}),Object(q.jsxs)("div",{className:"-ml-2 py-2 px-4 bg-gray-200 rounded",children:[Object(q.jsxs)("div",{className:"flex justify-between items-center",children:[Object(q.jsx)("h1",{className:"font-semibold text-gray-800",children:e.sender.first_name||e.sender.username}),Object(q.jsx)("span",{className:"text-xs",children:(t=e.created,t.substring(11,19))})]}),Object(q.jsx)("p",{dangerouslySetInnerHTML:{__html:Re.sanitize(e.text)}})]})]},parseInt(e.id));var t}))})]}),Object(q.jsxs)("div",{className:"flex mt-10",children:[Object(q.jsx)("input",{type:"text",className:"p-3 bg-transparent border border-r-0 border-gray-400 text-sm outline-none rounded-tl rounded-bl w-full tracking-wide",placeholder:"Type a new message",value:D,ref:ge,onChange:function(e){return I(e.target.value)}}),Object(q.jsx)("button",{className:"p-2 bg-blue-800 text-gray-200 rounded-tr rounded-br",onClick:function(e){return Ee(e)},children:Object(q.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Object(q.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})})})]})]})})})}),Object(q.jsx)(Le,{audio:i,video:m,screenShare:K,showChat:R,setAudio:j,setVideo:x,setScreenShare:X,setShowChat:H,leaveRoom:function(){me.current.srcObject.getTracks().forEach((function(e){return e.stop()})),xe.current=null,a(xe.current),fe.current.disconnect(),e.history.push("/")},peersRef:xe,userStream:Oe}),"1"===he[0]&&Object(q.jsx)("div",{children:Object(q.jsxs)(P.a,{fullScreen:Se,open:!0,onClose:function(){fe.current.emit("permit status",{allowed:!1,id:ve.current}),pe("")},"aria-labelledby":"responsive-dialog-title",children:[Object(q.jsx)(J.a,{id:"responsive-dialog-title",children:"Someone wants to join this meeting"}),Object(q.jsx)(G.a,{children:Object(q.jsx)(B.a,{children:"Hey, ".concat(he.substr(2)," wants to join the call.")})}),Object(q.jsxs)(U.a,{children:[Object(q.jsx)(W.a,{autoFocus:!0,onClick:function(){fe.current.emit("permit status",{allowed:!1,id:ve.current}),pe("")},color:"primary",children:"Deny Entry"}),Object(q.jsx)(W.a,{onClick:function(){fe.current.emit("permit status",{allowed:!0,id:ve.current}),pe("")},color:"primary",autoFocus:!0,children:"Admit"})]})]})}),"denied to join"===he&&Object(q.jsx)("div",{children:Object(q.jsxs)(P.a,{fullScreen:Se,open:!0,onClose:function(){pe(""),window.location.href=window.location.origin},"aria-labelledby":"responsive-dialog-title",children:[Object(q.jsx)(J.a,{id:"responsive-dialog-title",children:"Permission Denied"}),Object(q.jsx)(G.a,{children:Object(q.jsx)(B.a,{children:"You are not allowed to join this call. Kindly contact the organizer for the permission."})}),Object(q.jsx)(U.a,{children:Object(q.jsx)(W.a,{autoFocus:!0,onClick:function(){pe(""),window.location.href=window.location.origin},color:"primary",children:"Ok"})})]})}),Object(q.jsx)("div",{className:Me.snackRoot,children:Object(q.jsx)(f.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:ee,autoHideDuration:6e3,onClose:function(){return ne(!1)},children:Object(q.jsx)(He,{onClose:function(){return ne(!1)},severity:"error",children:"The message cannot be empty!"})})}),Object(q.jsx)("div",{className:Me.snackRoot,children:Object(q.jsx)(f.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:0!==ie[0].length,autoHideDuration:6e3,onClose:function(){return de([""])},children:Object(q.jsx)(He,{onClose:function(){return de([""])},severity:"success",children:ie[0]})})}),Object(q.jsx)("div",{children:Object(q.jsx)(W.a,{variant:"contained",color:"primary",className:Me.button,endIcon:Object(q.jsx)(oe.a,{}),onClick:function(){navigator.clipboard.writeText(window.location.href.toString()),de(["Link Copied To Clipboard"])},children:"Copy Meeting Link"})})]})},Ge=n(236),Be=n(510),Je=n(520),Ve=Object(h.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),Ye=function(e){var t=Object(r.useState)(!1),n=Object(d.a)(t,2),c=n[0],a=n[1],o=Object(r.useRef)(),s=Ve();return Object(r.useEffect)((function(){(function(){var t=Object(u.a)(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={method:"post",url:"/fetch_keys"},t.next=4,S()(n);case 4:r=t.sent,o.current={},o.current.projectID=r.data.projectID,o.current.userName=e.location.state.username,o.current.userSecret=r.data.userSecret,o.current.projectID&&o.current.userName&&o.current.userSecret&&a(!0),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0),e.history.push("/");case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}})()()}),[c,e.history,e.location.state.username]),Object(q.jsx)(q.Fragment,{children:c?Object(q.jsx)(Ge.d,{height:"100vh",projectID:o.current.projectID,userName:o.current.userName,userSecret:o.current.userSecret}):Object(q.jsx)(Be.a,{className:s.backdrop,open:!0,children:Object(q.jsx)(Je.a,{color:"inherit"})})})},qe=function(){var e=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={method:"post",url:"/create_user",data:{username:"bob_baker"}},e.next=5,S()(t);case 5:n=e.sent,console.log(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={method:"post",url:"/create_chat",data:{title:"Baker's Chat",admin_username:"bob_baker"}},e.next=5,S()(t);case 5:n=e.sent,console.log(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={method:"post",url:"/add_user",data:{username:"bob_baker"}},e.next=5,S()(t);case 5:n=e.sent,console.log(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={method:"post",url:"/get_chat_msgs",data:{username:"Saket"}},e.next=5,S()(t);case 5:n=e.sent,console.log(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={method:"post",url:"/post_chat_msg",data:{username:"Saket",data:{text:"Hello World",custom_json:{gif:"https://giphy.com/clips/ufc-4eZuG5kNYvDrGc6gYk"}}}},e.next=5,S()(t);case 5:n=e.sent,console.log(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("button",{onClick:e,children:"Create User"}),Object(q.jsx)("br",{}),Object(q.jsx)("button",{onClick:function(){return t()},children:"Create Chat"}),Object(q.jsx)("br",{}),Object(q.jsx)("button",{onClick:function(){return n()},children:"Add User"}),Object(q.jsx)("br",{}),Object(q.jsx)("button",{onClick:function(){return r()},children:"Get Chat"}),Object(q.jsx)("br",{}),Object(q.jsx)("button",{onClick:function(){return c()},children:"Send Chat Msg"})]})};var Ke=function(){return Object(q.jsx)(o.a,{children:Object(q.jsxs)(s.c,{children:[Object(q.jsx)(s.a,{path:"/room/:roomID",exact:!0,component:Ue}),Object(q.jsx)(s.a,{path:"/chat",exact:!0,component:Ye}),Object(q.jsx)(s.a,{path:"/create",exact:!0,component:qe}),Object(q.jsx)(s.a,{path:"/",exact:!0,component:Z})]})})},Xe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,525)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))};n(474);a.a.render(Object(q.jsx)(p.a,{domain:"dev-h72otjre.us.auth0.com",clientId:"uepAKWqvGUsJyYEVE10EjqeTJ2MUSAXz",redirectUri:window.location.origin,children:Object(q.jsx)(Ke,{})}),document.getElementById("root")),Xe()}},[[475,1,2]]]);
//# sourceMappingURL=main.746ae984.chunk.js.map