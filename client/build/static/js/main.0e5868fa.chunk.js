(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{256:function(e,t,n){},309:function(e,t){},311:function(e,t){},321:function(e,t,n){},473:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(13),a=n.n(c),o=(n(256),n(235)),s=n(20),i=n(5),l=n.n(i),u=n(11),d=n(9),j=n(36),b=n(524),h=n(509),p=n(67),f=n(525),m=n(522),x=n(220),O=n.n(x),g=n(108),v=n.n(g),w=n(219),y=n.n(w),k=n(221),N=n.n(k),C=(n(508),n(10)),S=n.n(C);function _(e){return D.apply(this,arguments)}function D(){return(D=Object(u.a)(l.a.mark((function e(t){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={email:t.email,first_name:t.given_name||t.name,last_name:t.family_name,username:t.email},r={method:"post",url:"/create_user",data:n},e.next=5,S()(r);case 5:return c=e.sent,e.abrupt("return",c.data.id);case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function I(e,t){return T.apply(this,arguments)}function T(){return(T=Object(u.a)(l.a.mark((function e(t,n){var r,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={userData:{email:t.email,first_name:t.given_name||t.name,last_name:t.family_name,username:t.email},roomID:n},c={method:"post",url:"/add_user",data:r},e.next=5,S()(c);case 5:return a=e.sent,e.abrupt("return",a.data.id);case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function E(e,t){return M.apply(this,arguments)}function M(){return(M=Object(u.a)(l.a.mark((function e(t,n){var r,c,a,o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new Date,c="".concat(t.given_name||t.name||t.email,"'s Meeting Chat: ").concat(r.getDate(),"/").concat(r.getMonth()+1,"/").concat(r.getFullYear()," @ ").concat(r.getHours(),":").concat(r.getMinutes(),":").concat(r.getSeconds()),a={userData:{title:c,admin_username:t.email},roomID:n},o={method:"post",url:"/create_chat",data:a},e.next=7,S()(o);case 7:return s=e.sent,console.log(s),e.abrupt("return",s.data.id);case 12:return e.prev=12,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function R(e,t){return L.apply(this,arguments)}function L(){return(L=Object(u.a)(l.a.mark((function e(t,n){var r,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={username:t.email,roomID:n},console.log("roomID: ".concat(n)),c={method:"post",url:"/get_chat_msgs",data:r},e.next=6,S()(c);case 6:return a=e.sent,console.log(a),e.abrupt("return",a.data);case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function A(e,t,n){return F.apply(this,arguments)}function F(){return(F=Object(u.a)(l.a.mark((function e(t,n,r){var c,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c={username:t.email,data:{text:n},roomID:r},console.log(c),a={method:"post",url:"/post_chat_msg",data:c},e.next=6,S()(a);case 6:return o=e.sent,console.log(o),e.abrupt("return",o);case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var z=n.p+"static/media/meeting.54508598.jpg",H=n.p+"static/media/logo.6dcdae02.jpg",P=n(516),U=n(523),W=n(515),G=n(513),B=n(514),J=n(512),V=n(510),Y=n(68),K=n(3),q=function(e){return Object(K.jsx)(m.a,Object(j.a)({elevation:6,variant:"filled"},e))},X=Object(h.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}})),Z=function(e){var t=X(),n=Object(r.useState)(!1),c=Object(d.a)(n,2),a=c[0],o=c[1],s=Object(r.useState)(!1),i=Object(d.a)(s,2),j=i[0],h=i[1],m=Object(r.useState)(""),x=Object(d.a)(m,2),g=x[0],w=x[1],k=Object(p.b)(),C=k.isAuthenticated,S=k.loginWithRedirect,D=k.logout,I=k.user,T=Object(Y.a)(),M=Object(V.a)(T.breakpoints.down("sm")),R=function(){var t=Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(C||S(),!C){t.next=7;break}return n=Object(b.a)(),t.next=5,E(I,n);case 5:t.sent?e.history.push("/room/".concat(n)):(h(!0),console.log("Error"));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),L=function(){var e=g.lastIndexOf("/"),t=g.substring(0,e+1),n=g.substring(e+1);return"http://localhost:3000/room/"===t||"https://localhost:3000/room/"===t||"https://engage-teams-clone.herokuapp.com/room/"===t||"http://engage-teams-clone.herokuapp.com/room/"===t?n:""},A=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(I);case 2:e.sent||(h(!0),setTimeout(D,2500));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){C&&A()}),[C]),Object(K.jsxs)("div",{children:[Object(K.jsx)("header",{className:"text-gray-700 body-font border-b border-gray-200",children:Object(K.jsxs)("div",{className:"container mx-auto flex flex-wrap p-5 flex-col md:flex-row items-center",children:[Object(K.jsx)("img",{src:H,className:"h-16 w-20"}),Object(K.jsx)("span",{className:"ml-3 text-xl",children:"TEEMS"}),Object(K.jsx)("nav",{className:"md:ml-auto flex flex-wrap items-center text-base justify-center",children:C?Object(K.jsx)("button",{className:"mt-5 md:mt-0 md:mr-5 inline-flex text-white bg-indigo-500 border-0 py-3 px-10 focus:outline-none hover:bg-indigo-600 rounded text-lg",onClick:function(){return D({returnTo:window.location.origin})},children:Object(K.jsx)("a",{className:"cursor-pointer",children:"Logout"})}):Object(K.jsx)("button",{className:"mt-5 md:mt-0 md:mr-5 inline-flex text-white bg-indigo-500 border-0 py-3 px-10 focus:outline-none hover:bg-indigo-600 rounded text-lg",onClick:function(){return S()},children:Object(K.jsx)("a",{className:"cursor-pointer",children:"Login"})})})]})}),Object(K.jsx)("section",{className:"text-gray-700 body-font",children:Object(K.jsxs)("div",{className:"container mx-auto flex px-5 py-24 md:flex-row flex-col items-center",children:[Object(K.jsxs)("div",{className:"lg:flex-grow md:w-1/2 lg:pr-24 md:pr-16 flex flex-col md:items-start md:text-left mb-16 md:mb-0 items-center text-center",children:[Object(K.jsx)("h1",{className:"title-font text-3xl md:text-4xl lg:text-5xl mb-4 font-bold text-gray-900",children:"Microsof Teems"}),Object(K.jsx)("p",{className:"mb-8 leading-relaxed text-xl md:text-2xl lg:text-3xl",children:"Meet, chat, and call in just one place."}),Object(K.jsxs)("div",{className:"flex justify-center",children:[Object(K.jsxs)("button",{className:"inline-flex text-white bg-indigo-500 border-0 py-2 px-6 focus:outline-none hover:bg-indigo-600 rounded text-lg",onClick:R,children:[Object(K.jsx)("span",{className:"mr-3",children:Object(K.jsx)(v.a,{})}),"New meeting"]}),Object(K.jsxs)("button",{className:"ml-4 inline-flex text-white bg-indigo-500 border-0 py-2 px-6 focus:outline-none hover:bg-indigo-600 rounded text-lg",onClick:function(){C||S(),C&&e.history.push({pathname:"/chat",state:{username:I.email}})},children:[Object(K.jsx)("span",{className:"mr-3",children:Object(K.jsx)(y.a,{})}),"Chat"]})]}),Object(K.jsxs)("div",{className:"mt-5 relative flex-col xl:flex-row flex w-full flex-wrap items-stretch mb-3 space-y-5 xl:space-y-0 xl:space-x-5",children:[Object(K.jsxs)("div",{className:"flex-1",children:[Object(K.jsx)("span",{className:"z-10 h-full leading-snug font-normal absolute text-center text-blueGray-300 absolute bg-transparent rounded text-lg items-center justify-center w-8 pl-3 py-3",children:Object(K.jsx)(O.a,{})}),Object(K.jsx)("input",{autoComplete:"off",id:"meeting-link",type:"text",placeholder:"Enter the link to join meeting",className:"leading-3 px-3 py-4 placeholder-blueGray-300 text-blueGray-600 relative bg-white bg-white rounded text-base border-0 shadow outline-none focus:outline-none focus:ring w-full pl-10",value:g,onChange:function(e){return w(e.target.value)}})]}),Object(K.jsxs)("button",{className:"text-white bg-indigo-500 border-0 py-2 px-6 focus:outline-none hover:bg-indigo-600 rounded text-lg",onClick:function(){if(function(e){var t;try{t=new URL(e)}catch(n){return!1}return"http:"===t.protocol||"https:"===t.protocol}(g)&&0!==L().length){if(C||S(),C){var t=L();e.history.push("/room/".concat(t))}}else o(!0),w("")},children:[Object(K.jsx)("span",{className:"mr-3",children:Object(K.jsx)(N.a,{})}),"Join meeting"]})]})]}),Object(K.jsx)("div",{className:"lg:max-w-lg lg:w-full md:w-1/2 w-5/6",children:Object(K.jsx)("img",{className:"object-cover object-center rounded",alt:"hero",src:z})})]})}),Object(K.jsx)("div",{className:t.root,children:Object(K.jsx)(f.a,{open:a,autoHideDuration:4e3,onClose:function(){return o(!1)},children:Object(K.jsx)(q,{onClose:function(){return o(!1)},severity:"error",children:"Invalid meeting link!"})})}),Object(K.jsx)("div",{children:Object(K.jsxs)(U.a,{fullScreen:M,open:j,onClose:function(){return h(!1)},"aria-labelledby":"responsive-dialog-title",children:[Object(K.jsx)(J.a,{id:"responsive-dialog-title",children:"Problem connecting"}),Object(K.jsx)(G.a,{children:Object(K.jsx)(B.a,{children:"It seems that something is temporarily wrong with your network connection. Please check your internet connection and try again."})}),Object(K.jsx)(W.a,{children:Object(K.jsx)(P.a,{autoFocus:!0,onClick:function(){return h(!1)},color:"primary",children:"OK"})})]})})]})},Q=n(14),$=n(133),ee=n(222),te=n.n(ee),ne=n(135),re=n(519),ce=n(520),ae=n(134),oe=n.n(ae);function se(e,t,n,r){var c=new oe.a({initiator:!0,trickle:!1});try{n.getTracks().forEach((function(e){return c.addTrack(e,n)}))}catch(a){console.log("Error in createPeer: ".concat(a))}return c.on("signal",(function(n){r.current.emit("offer",{userToSignal:e,callerID:t,data:n})})),c}function ie(e,t,n,r){var c=new oe.a({initiator:!1,trickle:!1});try{n.getTracks().forEach((function(e){return c.addTrack(e,n)}))}catch(a){console.log("Error in addPeer: ".concat(a))}return c.on("signal",(function(e){r.current.emit("answer",{data:e,callerID:t})})),c.signal(e),c}var le=n(517),ue=n(518),de=n(224),je=n.n(de),be=n(223),he=n.n(be),pe=n(225),fe=n.n(pe),me=n(230),xe=n.n(me),Oe=n(227),ge=n.n(Oe),ve=n(226),we=n.n(ve),ye=n(228),ke=n.n(ye),Ne=n(229),Ce=n.n(Ne),Se=Object(h.a)({root:{position:"absolute",bottom:0,width:"100%",backgroundColor:"#202124"}});function _e(e){if(null==e||"object"!=typeof e)return e;var t=e.constructor();for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function De(){return(De=Object(u.a)(l.a.mark((function e(t,n,r,c,a,o){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,console.log(o.current),c){e.next=12;break}return e.next=5,navigator.mediaDevices.getDisplayMedia({cursor:!0});case 5:s=e.sent,o.current=s.getTracks()[0],r.current.forEach((function(e){e.peer.replaceTrack(t.videoTracks[0],o.current,n.current)})),a(!0),o.current.onended=function(){r.current.forEach((function(e){e.peer.replaceTrack(o.current,t.videoTracks[0],n.current)}))},e.next=13;break;case 12:o.current&&(console.log("RAN"),o.current.stop(),a(!1));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}var Ie,Te,Ee=function(e){var t=e.audio,n=e.video,c=e.screenShare,a=e.showChat,o=e.setAudio,s=e.setVideo,i=e.setScreenShare,l=e.setShowChat,u=e.leaveRoom,d=e.peersRef,j=e.userStream,b=Object(r.useRef)(),h=Se();return Object(K.jsxs)(le.a,{showLabels:!0,className:h.root,children:[Object(K.jsx)(ue.a,{onClick:function(){return function(e,t){if(e&&e.audioTracks){e.audioTracks.forEach((function(e){return e.enabled=!e.enabled})),e.isMuted=!e.isMuted,t(_e(e))}}(t,o)},label:t.isMuted?Object(K.jsx)("span",{style:{color:"white"},children:"Turn on microphone"}):Object(K.jsx)("span",{style:{color:"white"},children:"Turn off microphone"}),icon:t.isMuted?Object(K.jsx)(he.a,{color:"secondary"}):Object(K.jsx)(je.a,{style:{color:"white"}})}),Object(K.jsx)(ue.a,{onClick:function(){return function(e,t){if(e&&e.videoTracks){e.videoTracks.forEach((function(e){return e.enabled=!e.enabled})),e.isOn=!e.isOn,t(_e(e))}}(n,s)},label:n.isOn?Object(K.jsx)("span",{style:{color:"white"},children:"Turn off camera"}):Object(K.jsx)("span",{style:{color:"white"},children:"Turn on camera"}),icon:n.isOn?Object(K.jsx)(v.a,{style:{color:"white"}}):Object(K.jsx)(fe.a,{color:"secondary"})}),Object(K.jsx)(ue.a,{onClick:function(){return function(e,t,n,r,c,a){return De.apply(this,arguments)}(n,j,d,c,i,b)},label:c?Object(K.jsx)("span",{style:{color:"white"},children:"Stop presenting"}):Object(K.jsx)("span",{style:{color:"white"},children:"Present now"}),icon:c?Object(K.jsx)(we.a,{color:"secondary"}):Object(K.jsx)(ge.a,{style:{color:"white"}})}),Object(K.jsx)(ue.a,{onClick:function(){return l(!a)},label:a?Object(K.jsx)("span",{style:{color:"white"},children:"Hide Chat"}):Object(K.jsx)("span",{style:{color:"white"},children:"Show Chat"}),icon:a?Object(K.jsx)(ke.a,{style:{color:"yellow"}}):Object(K.jsx)(Ce.a,{style:{color:"white"}})}),Object(K.jsx)(ue.a,{onClick:function(){return u()},label:Object(K.jsx)("span",{style:{color:"white"},children:"Leave call"}),icon:Object(K.jsx)(xe.a,{color:"secondary"})})]})},Me=(n(321),n(322)(window)),Re=Object(h.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:"#202124"},gridList:{width:"100%",height:"100%",display:"flex",padding:0,flexWrap:"wrap",listStyle:"none",overflow:"auto",justifyContent:"center"}}})),Le=ne.a.div(Ie||(Ie=Object($.a)(["\n  position: absolute;\n  top: 10px;\n  bottom: 10px;\n  height: 100%;\n  width: 100%;\n  margin: auto;\n  background-color: #202124;\n"]))),Ae=ne.a.video(Te||(Te=Object($.a)(["\n  position: absolute;\n  right: 1%;\n  bottom: 5%;\n  height: 16%;\n  width: 20%;\n  z-index: 1;\n"]))),Fe={audio:{echoCancellation:!0},video:{width:{min:1280},height:{min:720}}},ze=function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){e.peer.on("stream",(function(e){t.current.srcObject=e}))}),[]),Object(K.jsx)("video",{height:"100%",width:"100%",playsInline:!0,autoPlay:!0,controls:!0,ref:t,style:{padding:0,objectFit:"cover",position:"absolute",right:0,bottom:0,minWidth:"100%",minHeight:"100%",width:"auto",height:"auto",backgroundSize:"cover",overflow:"hidden"}})},He=function(e){var t=Object(r.useState)([]),n=Object(d.a)(t,2),c=n[0],a=n[1],o=Object(r.useState)({}),s=Object(d.a)(o,2),i=s[0],j=s[1],b=Object(r.useState)({}),h=Object(d.a)(b,2),f=h[0],m=h[1],x=Object(r.useState)(),O=Object(d.a)(x,2),g=O[0],v=O[1],w=Object(r.useState)([]),y=Object(d.a)(w,2),k=y[0],N=y[1],C=Object(r.useState)(""),S=Object(d.a)(C,2),_=S[0],D=S[1],T=Object(r.useState)(!1),E=Object(d.a)(T,2),M=E[0],L=E[1],F=Object(r.useState)(!1),z=Object(d.a)(F,2),H=z[0],q=z[1],X=Object(r.useState)(""),Z=Object(d.a)(X,2),$=Z[0],ee=Z[1],ne=Object(r.useRef)(),ae=Object(r.useRef)(),oe=Object(r.useRef)([]),le=Object(r.useRef)(),ue=Object(r.useRef)(),de=Object(r.useRef)(),je=Object(p.b)(),be=(je.logout,je.user),he=je.isAuthenticated,pe=je.loginWithRedirect,fe=Object(Y.a)(),me=Object(V.a)(fe.breakpoints.down("sm")),xe=e.match.params.roomID;Object(r.useEffect)((function(){var e=window.screen.height;v(e),window.addEventListener("resize",(function(){var e=window.screen.height;v(e)})),ne.current=te.a.connect("/");var t=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia(Fe);case 2:t=e.sent,le.current=t,ae.current.srcObject=t,j({isMuted:!1,audioTracks:t.getAudioTracks()}),m({isOn:!0,videoTracks:t.getVideoTracks()}),ne.current.emit("join-room",{roomID:xe,email:be.email}),ne.current.on("all-users",(function(e){var n=[];e.forEach((function(e){var r=se(e,ne.current.id,t,ne);oe.current.push({peerID:e,peer:r}),n.push({peerID:e,peer:r})})),a(Object(Q.a)(oe.current))})),ne.current.on("user-joined",(function(e){var n=ie(e.data,e.callerID,t,ne);oe.current.push({peerID:e.callerID,peer:n}),a(Object(Q.a)(oe.current))})),ne.current.on("receiving-answer",(function(e){oe.current.find((function(t){return t.peerID===e.id})).peer.signal(e.data),I(be,xe)})),ne.current.on("user-left",(function(e){var t=oe.current.find((function(t){return t.peerID===e}));t&&t.peer.destroy();var n=oe.current.filter((function(t){return t.peerID!==e}));oe.current=n,a(n)})),ne.current.on("reload_msgs",(function(e){ge()}));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();he?function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ne.current.emit("permission",{userName:be.name||be.email,roomID:xe,email:be.email}),ne.current.on("no permit required",Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:return e.next=5,ge();case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))),ne.current.on("permit?",(function(e){console.log("payload: ",e);var t=e.userAlias,n=e.id;de.current=n,ee("1 ".concat(t))})),ne.current.on("denied",(function(){ee("denied to join")})),ne.current.on("allowed",function(){var e=Object(u.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:return e.next=5,ge();case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()():pe()}),[]);var Oe=function(e){return 1===e?60:e<=4?30:e<=9?20:e<=16?15:void 0},ge=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(be,xe);case 2:(t=e.sent)&&"function"===typeof t[Symbol.iterator]&&N(Object(Q.a)(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ve=function(e){var t="";return e.first_name&&(t+=e.first_name.substr(0,1).toUpperCase()),e.last_name&&(t+=e.last_name.substr(0,1).toUpperCase()),t},we=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==_.length){e.next=4;break}console.log("Kuch toh likho"),e.next=10;break;case 4:return e.next=6,A(be,_,xe);case 6:e.sent,ne.current.emit("reload"),D(""),ge();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=Re();return Object(K.jsxs)(Le,{children:[Object(K.jsx)(Ae,{controls:!0,muted:!0,ref:ae,autoPlay:!0,playsInline:!0}),Object(K.jsx)("div",{className:ye.root,children:Object(K.jsx)(re.a,{cellHeight:Math.floor(g/35),cols:60,className:ye.gridList,children:c.map((function(e){return Object(K.jsx)(ce.a,{rows:(t=c.length,t<=2?30:t<=6?15:t<=9?10:t<=16?7:void 0),cols:Oe(c.length),children:Object(K.jsx)(ze,{peer:e.peer})},e.peerID);var t}))})}),Object(K.jsx)("div",{style:{position:"absolute",height:"100%",width:"100%",top:0},children:Object(K.jsx)("div",{className:"flex justify-between",style:{minHeight:"95%"},children:Object(K.jsx)("section",{className:"flex",children:Object(K.jsxs)("div",{id:"chat-div",className:(M?"":"hidden")+" bg-gray-100 text-gray-700 sm:max-w-sm p-4 border-t border-b-4 border-gray-300 flex flex-col justify-between",children:[Object(K.jsxs)("div",{children:[Object(K.jsx)("div",{className:"flex justify-between items-center",children:Object(K.jsx)("h1",{className:"font-semibold",children:"Meeting chat"})}),Object(K.jsxs)("div",{className:"py-3 flex justify-center items-center space-x-4 text-sm",children:[Object(K.jsx)("svg",{className:"w-6 h-6 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Object(K.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),Object(K.jsx)("h2",{className:"font-semibold",children:"Meeting started"})]}),Object(K.jsx)("div",{style:{maxHeight:"23.2rem"},className:"text-sm mt-4 space-y-4 overflow-scroll scrollbar-hidden",children:k.map((function(e){return Object(K.jsxs)("div",{className:"flex",children:[Object(K.jsx)("span",{className:"bg-indigo-900 text-gray-300 h-8 w-10 p-2 rounded-full flex items-center justify-center mt-2 z-10",children:ve(e.sender)}),Object(K.jsxs)("div",{className:"-ml-2 py-2 px-4 bg-gray-200 rounded",children:[Object(K.jsxs)("div",{className:"flex justify-between items-center",children:[Object(K.jsx)("h1",{className:"font-semibold text-gray-800",children:e.sender.first_name||e.sender.username}),Object(K.jsx)("span",{className:"text-xs",children:(t=e.created,t.substring(11,19))})]}),Object(K.jsx)("p",{dangerouslySetInnerHTML:{__html:Me.sanitize(e.text)}})]})]},parseInt(e.id));var t}))})]}),Object(K.jsxs)("div",{className:"flex mt-10",children:[Object(K.jsx)("input",{type:"text",className:"p-3 bg-transparent border border-r-0 border-gray-400 text-sm outline-none rounded-tl rounded-bl w-full tracking-wide",placeholder:"Type a new message",value:_,ref:ue,onChange:function(e){return D(e.target.value)}}),Object(K.jsx)("button",{className:"p-2 bg-blue-800 text-gray-200 rounded-tr rounded-br",onClick:function(e){return we(e)},children:Object(K.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Object(K.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})})})]})]})})})}),Object(K.jsx)(Ee,{audio:i,video:f,screenShare:H,showChat:M,setAudio:j,setVideo:m,setScreenShare:q,setShowChat:L,leaveRoom:function(){ae.current.srcObject.getTracks().forEach((function(e){return e.stop()})),oe.current=null,a(oe.current),ne.current.disconnect(),e.history.push("/")},peersRef:oe,userStream:le}),"1"===$[0]&&Object(K.jsx)("div",{children:Object(K.jsxs)(U.a,{fullScreen:me,open:!0,onClose:function(){ne.current.emit("permit status",{allowed:!1,id:de.current}),ee("")},"aria-labelledby":"responsive-dialog-title",children:[Object(K.jsx)(J.a,{id:"responsive-dialog-title",children:"Someone wants to join this meeting"}),Object(K.jsx)(G.a,{children:Object(K.jsx)(B.a,{children:"Hey, ".concat($.substr(2)," wants to join the call.")})}),Object(K.jsxs)(W.a,{children:[Object(K.jsx)(P.a,{autoFocus:!0,onClick:function(){ne.current.emit("permit status",{allowed:!1,id:de.current}),ee("")},color:"primary",children:"Deny Entry"}),Object(K.jsx)(P.a,{onClick:function(){ne.current.emit("permit status",{allowed:!0,id:de.current}),ee("")},color:"primary",autoFocus:!0,children:"Admit"})]})]})}),"denied to join"===$&&Object(K.jsx)("div",{children:Object(K.jsxs)(U.a,{fullScreen:me,open:!0,onClose:function(){ee(""),window.location.href=window.location.origin},"aria-labelledby":"responsive-dialog-title",children:[Object(K.jsx)(J.a,{id:"responsive-dialog-title",children:"Permission Denied"}),Object(K.jsx)(G.a,{children:Object(K.jsx)(B.a,{children:"You are not allowed to join this call. Kindly contact the organizer for the permission."})}),Object(K.jsx)(W.a,{children:Object(K.jsx)(P.a,{autoFocus:!0,onClick:function(){ee(""),window.location.href=window.location.origin},color:"primary",children:"Ok"})})]})})]})},Pe=n(236),Ue=n(511),We=n(521),Ge=Object(h.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),Be=function(e){var t=Object(r.useState)(!1),n=Object(d.a)(t,2),c=n[0],a=n[1],o=Object(r.useRef)(),s=Ge(),i=function(){var t=Object(u.a)(l.a.mark((function t(){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={method:"post",url:"/fetch_keys"},t.next=4,S()(n);case 4:r=t.sent,o.current={},o.current.projectID=r.data.projectID,o.current.userName=e.location.state.username,o.current.userSecret=r.data.userSecret,o.current.projectID&&o.current.userName&&o.current.userSecret&&a(!0),console.log(c),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0),e.history.push("/");case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){i()}),[]),Object(K.jsx)(K.Fragment,{children:c?Object(K.jsx)(Pe.d,{height:"100vh",projectID:o.current.projectID,userName:o.current.userName,userSecret:o.current.userSecret}):Object(K.jsx)(Ue.a,{className:s.backdrop,open:!0,children:Object(K.jsx)(We.a,{color:"inherit"})})})},Je=function(){var e=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={method:"post",url:"/create_user",data:{username:"bob_baker"}},e.next=5,S()(t);case 5:n=e.sent,console.log(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={method:"post",url:"/create_chat",data:{title:"Baker's Chat",admin_username:"bob_baker"}},e.next=5,S()(t);case 5:n=e.sent,console.log(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={method:"post",url:"/add_user",data:{username:"bob_baker"}},e.next=5,S()(t);case 5:n=e.sent,console.log(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={method:"post",url:"/get_chat_msgs",data:{username:"Saket"}},e.next=5,S()(t);case 5:n=e.sent,console.log(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={method:"post",url:"/post_chat_msg",data:{username:"Saket",data:{text:"Hello World",custom_json:{gif:"https://giphy.com/clips/ufc-4eZuG5kNYvDrGc6gYk"}}}},e.next=5,S()(t);case 5:n=e.sent,console.log(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)("button",{onClick:e,children:"Create User"}),Object(K.jsx)("br",{}),Object(K.jsx)("button",{onClick:function(){return t()},children:"Create Chat"}),Object(K.jsx)("br",{}),Object(K.jsx)("button",{onClick:function(){return n()},children:"Add User"}),Object(K.jsx)("br",{}),Object(K.jsx)("button",{onClick:function(){return r()},children:"Get Chat"}),Object(K.jsx)("br",{}),Object(K.jsx)("button",{onClick:function(){return c()},children:"Send Chat Msg"})]})};var Ve=function(){return Object(K.jsx)(o.a,{children:Object(K.jsxs)(s.c,{children:[Object(K.jsx)(s.a,{path:"/room/:roomID",component:He}),Object(K.jsx)(s.a,{path:"/chat",component:Be}),Object(K.jsx)(s.a,{path:"/create",component:Je}),Object(K.jsx)(s.a,{path:"/",component:Z})]})})},Ye=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,526)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))};n(472);a.a.render(Object(K.jsx)(p.a,{domain:"dev-h72otjre.us.auth0.com",clientId:"uepAKWqvGUsJyYEVE10EjqeTJ2MUSAXz",redirectUri:window.location.origin,children:Object(K.jsx)(Ve,{})}),document.getElementById("root")),Ye()}},[[473,1,2]]]);
//# sourceMappingURL=main.0e5868fa.chunk.js.map